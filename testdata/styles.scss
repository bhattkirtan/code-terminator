//FIXME: Concept for separation of app and lib required. This is only a temporary solution (having all styles copied from the app).

// Custom Theming for Angular Material
// For more information: https://material.angular.io/guide/theming
@use '@angular/material' as mat;
@use './scss/jivs-theme.scss' as jivs;
@use './scss/jivs-quantities-theme' as jivs-quantities;
@use "sass:map";
@import "./scss/fonts";

/* #355: Use fonts and icons offline */
@import 'material-icons/iconfont/material-icons.css';

// Plus imports for other components in your app.

//DMI: Overwriting background color of drawer

// Include the common styles for Angular Material. We include this here so that you only
// have to load a single css file for Angular Material in your app.
// Be sure that you only ever include this mixin once!
// TODO: As of v15 mat.legacy-core no longer includes default typography styles.
//  The following line adds:
//    1. Default typography styles for all components
//    2. Styles for typography hierarchy classes (e.g. .mat-headline-1)
//  If you specify typography styles for the components you use elsewhere, you should delete this line.
//  If you don't need the default component typographies but still want the hierarchy styles,
//  you can delete this line and instead use:
//    `@include mat.legacy-typography-hierarchy(mat.define-typography-config());`
@include mat.all-component-typographies;
@include mat.core;
@import 'themes';

/* TODO: Can we put this somehow into the themes.scss? Had problems just copying it there. */

/* Define the palettes for your theme using the Material Design palettes available in palette.scss
 (imported above). For each palette, you can optionally specify a default, lighter, and darker
 hue. Available color palettes: https://material.io/design/color/ */

/* light blue accent base color palette (base #187CDA as proposed by roger) */

/* generated using: https://m2.material.io/design/color/the-color-system.html#tools-for-picking-colors */
$bright-roger-blue-palette: (
  50: #e4f3fe,
  100: #bce0fd,
  200: #92cefd,
  300: #66bafc,
  400: #43abfc,
  500: #219dfb,
  600: #1d8fed,
  700: #187cda,
  800: #146bc8,
  900: #0c4da9,
  contrast: (
    500: white,
    600: white,
    700: white,
    800: white,
    900: white,
  ),
);
$occ-platform-ui-ng-primary: mat.m2-define-palette(mat.$m2-indigo-palette);
$occ-platform-ui-ng-primary: mat.m2-define-palette(mat.$m2-gray-palette);
$occ-platform-ui-ng-accent: mat.m2-define-palette(
  $bright-roger-blue-palette,
  700,
  800,
  900
);

/* The warn palette is optional (defaults to red). */
$occ-platform-ui-ng-warn: mat.m2-define-palette(mat.$m2-red-palette);

/* Create the theme object. A theme consists of configurations for individual */

/* theming systems such as "color" or "typography". */
$occ-platform-ui-ng-theme: mat.m2-define-dark-theme(
  (
    color: (
      primary: $occ-platform-ui-ng-primary,
      accent: $occ-platform-ui-ng-accent,
      warn: $occ-platform-ui-ng-warn,
    ),
    //density: -3, //CHANGE From NG 14 -> 16 this caused some labels and css not to be properlery rendered
    /* Have a reduced density to save some space */
  )
);

/* Include theme styles for core and each component used in your app.
 Alternatively, you can import and @include the theme mixins for each component
 that you are using. */
@include mat.all-component-themes($occ-platform-ui-ng-theme);
@include jivs.theme($occ-platform-ui-ng-theme);
@include jivs-quantities.theme($occ-platform-ui-ng-theme);

* {
  /* --jivs-bordered-radius: 4px; */
  --jivs-bordered-radius: 0px;
  --jivs-container-margin: 2px;
  --jivs-container-padding: 4px;
  --jivs-container-item-margin: 6px;
  --sidebar-width: 6rem;
  --dialog-border: 0.8rem;
}

.card.jivs-bordered {
  /* How to bundle this in our dark theme? */

  /* This does not effect the quantities filter box and filters, but the cards, why? */
  border-radius: 4px;
}

/* You can add global styles to this file, and also import other style files */

html,
body {
  height: 100%;
}

body {
  margin: 0;
  font-family: Roboto, 'Helvetica Neue', sans-serif;
}

.mat-mdc-ink-bar,
.mat-mdc-tab-link,
mat-mdc-ink-bar.mat-mdc-ink-bar {
  // --tab-active-border-color: rgb(85, 85, 85);
  // --tab-active-background-color: rgb(70, 70, 70);
  opacity: 1 !important;
}

mat-mdc-ink-bar.mat-mdc-ink-bar {
  opacity: 0 !important;
}

.mat-mdc-tab-links {
  align-items: end;
}

/* TODO(mdc-migration): The following rule targets internal classes of tabs that may no longer apply for the MDC version. */
a.mat-mdc-tab-link.mat-mdc-tab-label-active {
  margin-bottom: 0 !important;
  background-color: var(--tab-active-background-color) !important;
  border-top: 1px solid var(--tab-active-border-color) !important;
  border-right: 1px solid var(--tab-active-border-color) !important;
  border-left: 1px solid var(--tab-active-border-color) !important;

  // height: 1.5rem;
  border-top-left-radius: 6px;
  border-top-right-radius: 6px;
}

.mat-mdc-tab-nav-bar.mat-mdc-tab-header {
  padding-bottom: 0 !important;
}

.mat-drawer-container {
  background-color: var(--dark-background-color) !important;
}

.mat-mdc-table {
  background-color: var(--dark-background-color) !important;
}

.jivs-spacer {
  flex: 1 1 auto;
}

/* SA report dialog, modifications */
.sa-report-card > .card.jivs-bordered {
  padding-left: 0 !important;
}

.dialog-sidenav > .mat-drawer-side {
  border-right: 0 solid red !important;
}

.dialog-sidenav * div.mat-expansion-panel-body {
  padding-right: 0 !important;
  padding-left: 0 !important;
}

/* jivs-select - add transparent feature */

.filter.jivs-bordered.jivs-transparent {
  background-color: transparent !important;
}

.filter.jivs-bordered.jivs-transparent * {
  /* TODO: Remove lower border somehow. But we may want to exclude "* .mat-select-arrow-wrapper div" like *:not(.mat-select-arrow-wrapper div) */
  background-color: transparent !important;
  box-shadow: unset !important;
}

.jivs-compact {
  padding-bottom: 1rem;
  padding-left: 1rem;
}

jivs-toolbar .jivs-compact {
  padding-bottom: 0;
}

/* Keep this in sync with typescript definitions of colors */
* {
  --jivs-color-filtered: rgb(183 24 24);
  --jivs-color-remaining: rgb(42 133 255);
  --jivs-color-others: rgb(207 207 207);
  --jivs-bar-chart: white;
  --jivs-color-error: rgb(244 67 54);
  --jivs-color-warn: rgb(255 247 132);
  --jivs-color-success: rgb(61 255 220);
  --jivs-color-accent: var(--jivs-color-remaining);
}

.jivs-vertical-splitter {
  width: 100%;
  margin-bottom: 0.3rem;
  border-bottom: 1px solid rgb(51 51 51);
}

.glasspane {
  opacity: 0.5;
  transition: opacity 0.5s ease-in-out;
}

footer {
  display: none;
}

/* Material 16: More compact styling of dropdowns */
.mat-mdc-select {
  --mat-select-trigger-text-size: 0.8rem;
}

.mat-mdc-option {
  --mat-option-label-text-size: 0.8rem;

  min-height: 30px !important;
}

.mat-mdc-option .mdc-list-item__primary-text {
  white-space: nowrap !important;
}

.mat-mdc-list-item.mdc-list-item--with-three-lines
  .mat-mdc-list-item-unscoped-content.mdc-list-item__secondary-text,
.mdc-list-item__secondary-text {
  display: flex !important;
}

jivs-shell3 {
  --mat-toolbar-standard-height: 48px;
}

jivs-shell3
  .mat-mdc-text-field-wrapper:not(.mdc-text-field--outlined)
  .mat-mdc-form-field-infix {
  padding-top: 10px !important;
  padding-bottom: 4px;
}

jivs-shell3 .mat-mdc-form-field-infix {
  min-height: 40px;
}

jivs-shell3
  .mat-mdc-text-field-wrapper
  .mat-mdc-form-field-flex
  .mat-mdc-floating-label {
  top: 20px;
}

jivs-shell3 .mat-mdc-form-field-subscript-wrapper {
  --mat-form-field-subscript-text-line-height: 3px !important;
}

jivs-shell3 .mat-mdc-form-field-bottom-align::before {
  content: none;
  display: none;
}

jivs-shell3 .mat-mdc-list-base {
  --mdc-list-list-item-label-text-size: 14px;
}


/**
 * overflow-y visible for dialogs
 * add Class to panelClass of dialog
 */
.dialog-with-visible-overflow-y .mat-mdc-dialog-surface {
  overflow-y: visible !important;
}

/**
 * slide in and out animation for dialogs (slide in from right and slide out to left)
 * see as example file:
 * occ-platform-lib/src/lib/components/jivs-cases-portal/services/jivs-cases-portal-form-dialog.service.ts
 * used by: cases-portal
 */
.dialog-slide-in-animation {
  animation: slideIn 0.3s ease-in-out;
}

.dialog-slide-out-animation.closing {
  animation: slideOut 0.3s ease-in-out forwards;
}

@keyframes slideIn {
  from { transform: translateX(100%); }
  to { transform: translateX(0); }
}

@keyframes slideOut {
  from { transform: translateX(0); }
  to { transform: translateX(100%); }
}

/**
 * transparent input
 * - no background
 * - no border
 * - brighter idle ripple
 * use it above or on the form
 * used by: cases-portal
 */
.transparent-input {
  --mdc-filled-text-field-label-text-color: rgb(255 255 255 / 40%);

  .mdc-text-field, .mat-mdc-text-field-wrapper, .mat-mdc-form-field-focus-overlay  {
    background: transparent !important;
  }

  .mat-mdc-text-field-wrapper {
    padding: 0 !important;
    border-bottom: none !important;
  }

  .mat-mdc-form-field-type-mat-input .mat-mdc-text-field-wrapper {
    cursor: text !important;
  }

  .mdc-line-ripple {
    --mdc-filled-text-field-active-indicator-color: rgb(255 255 255 / 15%) !important;
  }

  .mdc-text-field--filled:not(.mdc-text-field--invalid) .mat-mdc-form-field-required-marker {
    color: rgb(42 133 255 /  40%)
  }

  .mat-mdc-form-field-required-marker {
    margin-left: -2px;
  }
}

/**
 * disable angular material ripple (line)
 */
.form-hide-ripple .mdc-line-ripple {
  display: none;
}

/**
 * Cases Portal specific formly styles
 */
.cases-portal-form-title {
  font-size: 20px !important;
  color: rgb(255 255 255 / 60%);
}

.cases-portal-form-hr {
  margin-bottom: 32px;
  border-color: rgb(255 255 255 / 40%);
  border-bottom: none;
}

.cases-portal-checkbox {
  .mdc-form-field, .mat-mdc-slide-toggle {
    width: 100%;
  }

  .mdc-label {
    width: 100%;
    padding-left: 16px;
    font-weight: 400;
    color: rgb(255 255 255 / 40%);
  }

  .mat-mdc-slide-toggle:not(.mat-mdc-slide-toggle-checked) .mdc-form-field:hover .mdc-label {
    color: rgb(255 255 255 / 60%);
  }

  .mat-mdc-slide-toggle-checked .mdc-label {
    color: map.get($bright-roger-blue-palette, 500)
  }
}
